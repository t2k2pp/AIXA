<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIer PM äº¤æ¸‰ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .game-header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .game-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .game-header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .game-screen {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
            min-height: 600px;
        }

        /* ã‚·ãƒŠãƒªã‚ªé¸æŠç”»é¢ */
        .scenario-selection {
            padding: 40px;
            text-align: center;
        }

        .scenario-selection h2 {
            font-size: 2rem;
            margin-bottom: 30px;
            color: #2c3e50;
        }

        .scenario-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 10px;
            padding: 30px;
            margin: 20px auto;
            max-width: 600px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .scenario-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .scenario-card h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .scenario-card p {
            font-size: 1rem;
            line-height: 1.6;
            color: #555;
        }

        /* ã‚²ãƒ¼ãƒ ç”»é¢ */
        .game-content {
            display: none;
        }

        .client-section {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .client-avatar {
            width: 120px;
            height: 120px;
            background: #2196f3;
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: white;
            transition: all 0.3s ease;
        }

        .client-name {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #1976d2;
        }

        .speech-bubble {
            background: white;
            border-radius: 20px;
            padding: 25px;
            position: relative;
            max-width: 600px;
            margin: 0 auto;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .speech-bubble::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-bottom: 15px solid white;
        }

        /* è©•ä¾¡æŒ‡æ¨™ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .metrics-section {
            padding: 30px;
            background: #f8f9fa;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .metric-item {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .metric-name {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .metric-bar {
            width: 100%;
            height: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .metric-fill {
            height: 100%;
            background: linear-gradient(45deg, #4caf50, #8bc34a);
            border-radius: 10px;
            transition: all 0.8s ease;
            position: relative;
        }

        .metric-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
        }

        /* é¸æŠè‚¢ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .choices-section {
            padding: 30px;
        }

        .turn-info {
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.1rem;
            color: #666;
        }

        .choices-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }

        .choice-button {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            line-height: 1.5;
        }

        .choice-button:hover {
            border-color: #667eea;
            background: #f8f9ff;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .choice-button:active {
            transform: translateY(0);
        }

        /* çµæœç”»é¢ */
        .result-screen {
            display: none;
            padding: 40px;
            text-align: center;
        }

        .result-title {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .result-success {
            color: #27ae60;
        }

        .result-failure {
            color: #e74c3c;
        }

        .final-scores {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .final-score-item {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 10px;
            padding: 20px;
        }

        .feedback-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            margin-top: 30px;
            text-align: left;
        }

        .feedback-section h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .feedback-section p {
            line-height: 1.8;
            margin-bottom: 15px;
            color: #555;
        }

        .restart-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 15px 30px;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .restart-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ */
        .metric-change {
            position: absolute;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            font-weight: bold;
            font-size: 1rem;
            opacity: 0;
            animation: scoreChange 2s ease-out;
        }

        .metric-change.positive {
            color: #27ae60;
        }

        .metric-change.negative {
            color: #e74c3c;
        }

        @keyframes scoreChange {
            0% {
                opacity: 1;
                transform: translateY(-50%) translateX(0);
            }
            100% {
                opacity: 0;
                transform: translateY(-50%) translateX(20px);
            }
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .game-header h1 {
                font-size: 2rem;
            }

            .choices-grid {
                grid-template-columns: 1fr;
            }

            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .speech-bubble {
                padding: 20px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="game-header">
            <h1>SIer PM äº¤æ¸‰ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h1>
            <p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¨ã—ã¦ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã®äº¤æ¸‰ã‚’æˆåŠŸã«å°ã“ã†</p>
        </div>

        <div class="game-screen">
            <!-- ã‚·ãƒŠãƒªã‚ªé¸æŠç”»é¢ -->
            <div id="scenario-selection" class="scenario-selection">
                <h2>äº¤æ¸‰ã‚·ãƒŠãƒªã‚ªã‚’é¸æŠã—ã¦ãã ã•ã„</h2>
                <div class="scenario-card" onclick="startGame('banking')">
                    <h3>ğŸ¦ é‡‘èæ¥­ - ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºä»•æ§˜å¤‰æ›´äº¤æ¸‰</h3>
                    <p>ã€‡ã€‡éŠ€è¡Œã®ã‚·ã‚¹ãƒ†ãƒ éƒ¨é•·ã¨ã®äº¤æ¸‰ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€”ä¸­ã§ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆéƒ½åˆã«ã‚ˆã‚‹æ€¥ãªä»•æ§˜å¤‰æ›´ã¸ã®å¯¾å¿œãŒå¿…è¦ã§ã™ã€‚è¿½åŠ é–‹ç™ºã®ã‚¹ã‚³ãƒ¼ãƒ—ã¨äºˆç®—ã€ç´æœŸã¸ã®å½±éŸ¿ã«ã¤ã„ã¦åˆæ„å½¢æˆã‚’è¡Œã„ã¾ã™ã€‚</p>
                </div>
            </div>

            <!-- ã‚²ãƒ¼ãƒ ç”»é¢ -->
            <div id="game-content" class="game-content">
                <!-- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div class="client-section">
                    <div id="client-avatar" class="client-avatar">ğŸ‘¨â€ğŸ’¼</div>
                    <div id="client-name" class="client-name">ç”°ä¸­ã‚·ã‚¹ãƒ†ãƒ éƒ¨é•·ï¼ˆã€‡ã€‡éŠ€è¡Œï¼‰</div>
                    <div class="speech-bubble">
                        <div id="client-speech">ãŠç–²ã‚Œæ§˜ã§ã™ã€‚æ€¥ãªè©±ã§ç”³ã—è¨³ãªã„ã®ã§ã™ãŒã€å®Ÿã¯çµŒå–¶é™£ã‹ã‚‰è¿½åŠ ã®è¦æœ›ãŒå‡ºã¦ãã¾ã—ã¦...</div>
                    </div>
                </div>

                <!-- è©•ä¾¡æŒ‡æ¨™ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div class="metrics-section">
                    <div class="metrics-grid">
                        <div class="metric-item">
                            <div class="metric-name">ä¿¡é ¼åº¦</div>
                            <div class="metric-bar">
                                <div id="trust-fill" class="metric-fill" style="width: 70%"></div>
                            </div>
                            <div id="trust-value" class="metric-value">70</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-name">äºˆç®—</div>
                            <div class="metric-bar">
                                <div id="budget-fill" class="metric-fill" style="width: 60%"></div>
                            </div>
                            <div id="budget-value" class="metric-value">60</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-name">ç´æœŸ</div>
                            <div class="metric-bar">
                                <div id="schedule-fill" class="metric-fill" style="width: 65%"></div>
                            </div>
                            <div id="schedule-value" class="metric-value">65</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-name">å“è³ª</div>
                            <div class="metric-bar">
                                <div id="quality-fill" class="metric-fill" style="width: 75%"></div>
                            </div>
                            <div id="quality-value" class="metric-value">75</div>
                        </div>
                    </div>
                </div>

                <!-- é¸æŠè‚¢ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div class="choices-section">
                    <div class="turn-info">
                        <span id="turn-counter">ã‚¿ãƒ¼ãƒ³ 1 / 8</span>
                    </div>
                    <div id="choices-grid" class="choices-grid">
                        <!-- é¸æŠè‚¢ã¯JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                    </div>
                </div>
            </div>

            <!-- çµæœç”»é¢ -->
            <div id="result-screen" class="result-screen">
                <h2 id="result-title" class="result-title">äº¤æ¸‰çµæœ</h2>
                
                <div class="final-scores">
                    <div class="final-score-item">
                        <div class="metric-name">ä¿¡é ¼åº¦</div>
                        <div id="final-trust" class="metric-value">--</div>
                    </div>
                    <div class="final-score-item">
                        <div class="metric-name">äºˆç®—</div>
                        <div id="final-budget" class="metric-value">--</div>
                    </div>
                    <div class="final-score-item">
                        <div class="metric-name">ç´æœŸ</div>
                        <div id="final-schedule" class="metric-value">--</div>
                    </div>
                    <div class="final-score-item">
                        <div class="metric-name">å“è³ª</div>
                        <div id="final-quality" class="metric-value">--</div>
                    </div>
                </div>

                <div class="feedback-section">
                    <h3>ğŸ“Š äº¤æ¸‰çµæœã®åˆ†æ</h3>
                    <div id="detailed-feedback">
                        <!-- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å†…å®¹ã¯JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                    </div>
                </div>

                <button class="restart-button" onclick="restartGame()">ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤ã™ã‚‹</button>
            </div>
        </div>
    </div>

    <script>
        // ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†ç”¨ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
        const gameState = {
            currentTurn: 1,
            maxTurns: 8,
            metrics: {
                trust: 70,     // ä¿¡é ¼åº¦
                budget: 60,    // äºˆç®—
                schedule: 65,  // ç´æœŸ
                quality: 75    // å“è³ª
            },
            playerChoices: []  // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®é¸æŠå±¥æ­´
        };

        // é‡‘èæ¥­ã‚·ãƒŠãƒªã‚ªã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
        const bankingScenario = {
            title: "é‡‘èæ¥­ - ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºä»•æ§˜å¤‰æ›´äº¤æ¸‰",
            client: {
                name: "ç”°ä¸­ã‚·ã‚¹ãƒ†ãƒ éƒ¨é•·ï¼ˆã€‡ã€‡éŠ€è¡Œï¼‰",
                avatar: "ğŸ‘¨â€ğŸ’¼",
                personality: "cost_conscious_but_cooperative" // ã‚³ã‚¹ãƒˆæ„è­˜ã¯é«˜ã„ãŒå”åŠ›çš„
            },
            // å„ã‚¿ãƒ¼ãƒ³ã®å¯¾è©±ãƒ‡ãƒ¼ã‚¿
            turns: [
                {
                    clientSpeech: "ãŠç–²ã‚Œæ§˜ã§ã™ã€‚æ€¥ãªè©±ã§ç”³ã—è¨³ãªã„ã®ã§ã™ãŒã€å®Ÿã¯çµŒå–¶é™£ã‹ã‚‰è¿½åŠ ã®è¦æœ›ãŒå‡ºã¦ãã¾ã—ã¦...æ–°ã—ã„ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã‚’è¿½åŠ ã—ãŸã„ã¨ã®ã“ã¨ã§ã™ã€‚",
                    choices: [
                        {
                            text: "è©³ç´°ãªè¦ä»¶ã‚’ç¢ºèªã•ã›ã¦ãã ã•ã„ã€‚ã¾ãšã¯ã©ã®ã‚ˆã†ãªãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã§ã—ã‚‡ã†ã‹ï¼Ÿ",
                            effects: { trust: +8, budget: 0, schedule: +5, quality: +10 },
                            nextResponse: "ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚æœˆæ¬¡ã®å–å¼•ã‚µãƒãƒªãƒ¼ã¨é¡§å®¢åˆ¥ã®åˆ†æãƒ¬ãƒãƒ¼ãƒˆã§ã™ã€‚æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ´»ç”¨ã§ãã‚‹ã¨æ€ã†ã®ã§ã™ãŒ..."
                        },
                        {
                            text: "æ‰¿çŸ¥ã„ãŸã—ã¾ã—ãŸã€‚è¿½åŠ é–‹ç™ºã«ãªã‚Šã¾ã™ã®ã§ã€ã¾ãšã¯æ¦‚ç®—ã®è²»ç”¨ã¨æœŸé–“ã‚’ãŠä¼ãˆã—ã¾ã™ã­ã€‚",
                            effects: { trust: +5, budget: +12, schedule: +3, quality: +5 },
                            nextResponse: "ãã†ã§ã™ã­ã€ã‚„ã¯ã‚Šè¿½åŠ è²»ç”¨ã¯ç™ºç”Ÿã—ã¾ã™ã‚ˆã­ã€‚ã§ãã‚‹ã ã‘æŠ‘ãˆãŸã„ã®ã§ã™ãŒã€ã©ã®ç¨‹åº¦ã«ãªã‚Šãã†ã§ã—ã‚‡ã†ã‹ï¼Ÿ"
                        },
                        {
                            text: "ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ãŒã€ç¾åœ¨ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã¯å¯¾å¿œãŒå›°é›£ã§ã™ã€‚ç´æœŸã®å»¶é•·ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚",
                            effects: { trust: -5, budget: +5, schedule: -15, quality: +8 },
                            nextResponse: "ãã†ã§ã™ã‹...ç´æœŸã¯éå¸¸ã«é‡è¦ãªã®ã§ã€ä½•ã¨ã‹èª¿æ•´ã§ãã‚‹æ–¹æ³•ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ"
                        },
                        {
                            text: "è¿½åŠ æ©Ÿèƒ½ã®å†…å®¹ã«ã‚‚ã‚ˆã‚Šã¾ã™ãŒã€ç¾åœ¨ã®äºˆç®—å†…ã§å¯¾å¿œå¯èƒ½ãªç¯„å›²ã§æ¤œè¨ã„ãŸã—ã¾ã™ã€‚",
                            effects: { trust: +3, budget: -10, schedule: +2, quality: -5 },
                            nextResponse: "ãã‚Œã¯åŠ©ã‹ã‚Šã¾ã™ã€‚ãŸã ã€æ©Ÿèƒ½é¢ã§ã¯å¦¥å”ã—ãŸããªã„éƒ¨åˆ†ã‚‚ã‚ã‚‹ã®ã§ã€è©³ã—ãç›¸è«‡ã•ã›ã¦ãã ã•ã„ã€‚"
                        }
                    ]
                },
                {
                    clientSpeech: "å…·ä½“çš„ã«ã¯ã€æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆã«åŠ ãˆã¦ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ©Ÿèƒ½ã‚‚æ¬²ã—ã„ã‚“ã§ã™ã€‚å½¹å“¡ä¼šè­°ã§ä½¿ç”¨ã™ã‚‹äºˆå®šã§...",
                    choices: [
                        {
                            text: "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¯æŠ€è¡“çš„ãªèª²é¡ŒãŒã‚ã‚Šã¾ã™ã€‚æ®µéšçš„ãªå®Ÿè£…ã‚’ã”ææ¡ˆã—ã¾ã™ã€‚",
                            effects: { trust: +10, budget: +8, schedule: +12, quality: +15 },
                            nextResponse: "æ®µéšçš„ã§ã™ã‹ã€‚ç¢ºã‹ã«ä¸€åº¦ã«å…¨ã¦ã‚’æ±‚ã‚ã‚‹ã®ã¯ç„¡ç†ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚"
                        },
                        {
                            text: "æ‰¿çŸ¥ã„ãŸã—ã¾ã—ãŸã€‚ãŸã ã—ã€ç›¸å¿œã®è¿½åŠ æŠ•è³‡ãŒå¿…è¦ã«ãªã‚‹ã“ã¨ã‚’ã”ç†è§£ãã ã•ã„ã€‚",
                            effects: { trust: +5, budget: +15, schedule: -5, quality: +8 },
                            nextResponse: "ã‚„ã¯ã‚Šè²»ç”¨ãŒã‹ã‹ã‚Šã¾ã™ã‚ˆã­ã€‚çµŒå–¶é™£ã‚’èª¬å¾—ã™ã‚‹ãŸã‚ã«ã€ROIã‚’ç¤ºã—ã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿ"
                        },
                        {
                            text: "ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ åŸºç›¤ã§ã¯æ€§èƒ½ã«å•é¡ŒãŒç”Ÿã˜ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚åŸºç›¤å¼·åŒ–ã‚‚æ¤œè¨ãŒå¿…è¦ã§ã™ã€‚",
                            effects: { trust: +12, budget: +10, schedule: -8, quality: +20 },
                            nextResponse: "ãã†ã§ã™ã­ã€å°†æ¥ã‚’è¦‹æ®ãˆãŸææ¡ˆã‚’ã„ãŸã ã‘ã‚‹ã®ã¯ã‚ã‚ŠãŒãŸã„ã§ã™ã€‚"
                        },
                        {
                            text: "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã—ãŸã‚‰ã€å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨ã‚‚æ¤œè¨ã§ãã¾ã™ã€‚",
                            effects: { trust: +3, budget: +5, schedule: +8, quality: -10 },
                            nextResponse: "å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã‹ã€‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é¢ã§ã®æ¤œè¨ã‚‚å¿…è¦ã§ã™ã­ã€‚"
                        }
                    ]
                },
                {
                    clientSpeech: "äºˆç®—ã®ä»¶ã§ã™ãŒã€ä»ŠæœŸã¯ã‚‚ã†ã‚ã¾ã‚Šä½™è£•ãŒãªã„ã‚“ã§ã™ã€‚æ¥æœŸã«å›ã™ã“ã¨ã‚‚è€ƒãˆã¦ã„ã¾ã™ãŒã€å¯èƒ½ã§ã—ã‚‡ã†ã‹ï¼Ÿ",
                    choices: [
                        {
                            text: "ãƒ•ã‚§ãƒ¼ã‚ºåˆ†ã‘ã‚’ã—ã¦ã€é‡è¦åº¦ã®é«˜ã„æ©Ÿèƒ½ã‹ã‚‰æ®µéšçš„ã«é–‹ç™ºã—ã¾ã—ã‚‡ã†ã€‚",
                            effects: { trust: +15, budget: +12, schedule: +10, quality: +12 },
                            nextResponse: "ãã‚Œã¯è‰¯ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã§ã™ã­ã€‚ã©ã®æ©Ÿèƒ½ã‚’å„ªå…ˆã™ã¹ãã§ã—ã‚‡ã†ã‹ï¼Ÿ"
                        },
                        {
                            text: "ä»ŠæœŸåˆ†ã¨æ¥æœŸåˆ†ã«åˆ†ã‘ã¦äºˆç®—è¨ˆç”»ã‚’ç«‹ã¦ç›´ã—ã¾ã—ã‚‡ã†ã€‚é•·æœŸçš„ãªè¦–ç‚¹ã§é€²ã‚ã¾ã™ã€‚",
                            effects: { trust: +12, budget: +18, schedule: +5, quality: +8 },
                            nextResponse: "é•·æœŸè¨ˆç”»ã§è€ƒãˆã¦ã„ãŸã ã‘ã‚‹ã¨ã€çµŒå–¶é™£ã¸ã®èª¬æ˜ã‚‚ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚"
                        },
                        {
                            text: "äºˆç®—åˆ¶ç´„ãŒã‚ã‚‹ãªã‚‰ã€æ©Ÿèƒ½ã®ç°¡ç´ åŒ–ã§å¯¾å¿œã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚",
                            effects: { trust: +5, budget: +8, schedule: +15, quality: -12 },
                            nextResponse: "æ©Ÿèƒ½ã®ç°¡ç´ åŒ–ã§ã™ã‹...ã©ã®ç¨‹åº¦ã¾ã§å‰Šæ¸›ã§ãã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ"
                        },
                        {
                            text: "æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã®æ´»ç”¨ã‚’æœ€å¤§åŒ–ã—ã¦ã€é–‹ç™ºã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆã‚‹æ–¹æ³•ã‚’æ¤œè¨ã—ã¾ã™ã€‚",
                            effects: { trust: +10, budget: +15, schedule: +8, quality: +5 },
                            nextResponse: "æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã‚’ã†ã¾ãæ´»ç”¨ã—ã¦ã„ãŸã ã‘ã‚‹ãªã‚‰ã€ãã‚ŒãŒä¸€ç•ªåŠ¹ç‡çš„ã§ã™ã­ã€‚"
                        }
                    ]
                },
                {
                    clientSpeech: "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä»¶ãªã‚“ã§ã™ãŒã€3æœˆæœ«ã®æ±ºç®—å‡¦ç†ã«ã¯é–“ã«åˆã‚ã›ãŸã„ã®ã§ã™ã€‚ä½•ã‹è‰¯ã„æ–¹æ³•ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ",
                    choices: [
                        {
                            text: "æ±ºç®—å‡¦ç†ã«å¿…è¦ãªæœ€å°é™ã®æ©Ÿèƒ½ã«çµã£ã¦ã€3æœˆæœ«ãƒªãƒªãƒ¼ã‚¹ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚",
                            effects: { trust: +10, budget: +5, schedule: +20, quality: +8 },
                            nextResponse: "ãã‚Œã§ãŠé¡˜ã„ã—ã¾ã™ã€‚æœ€å°é™ã§ã‚‚å‹•ãå½¢ã«ã—ã¦ã„ãŸã ã‘ã‚Œã°ã€‚"
                        },
                        {
                            text: "ãƒªã‚½ãƒ¼ã‚¹ã‚’è¿½åŠ æŠ•å…¥ã—ã¦ã€ä½•ã¨ã‹3æœˆæœ«ã«é–“ã«åˆã‚ã›ã‚‹æ–¹æ³•ã‚’æ¤œè¨ã—ã¾ã™ã€‚",
                            effects: { trust: +8, budget: -12, schedule: +15, quality: -5 },
                            nextResponse: "è¿½åŠ æŠ•å…¥ã—ã¦ã„ãŸã ã‘ã¾ã™ã‹ã€‚è²»ç”¨ã®é¢ã§å•é¡Œãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ"
                        },
                        {
                            text: "å“è³ªã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã«ã€4æœˆä¸­æ—¬ã®å®Œæˆã‚’ã”ææ¡ˆã—ã¾ã™ã€‚æ€¥ãã™ãã‚‹ã¨ãƒªã‚¹ã‚¯ãŒé«˜ã¾ã‚Šã¾ã™ã€‚",
                            effects: { trust: +12, budget: +8, schedule: -10, quality: +18 },
                            nextResponse: "å“è³ªé‡è¦–ã®ã”ææ¡ˆã€ç†è§£ã§ãã¾ã™ã€‚ãŸã ã€çµŒå–¶é™£ã¸ã®èª¬æ˜ãŒ..."
                        },
                        {
                            text: "æš«å®šç‰ˆã‚’3æœˆæœ«ã«ãƒªãƒªãƒ¼ã‚¹ã—ã€å®Œå…¨ç‰ˆã‚’4æœˆæœ«ã«æä¾›ã™ã‚‹2æ®µéšæ–¹å¼ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ï¼Ÿ",
                            effects: { trust: +15, budget: +3, schedule: +12, quality: +10 },
                            nextResponse: "2æ®µéšæ–¹å¼ã§ã™ã­ã€‚ãã‚Œãªã‚‰æ±ºç®—ã«ã¯é–“ã«åˆã„ã¾ã™ã—ã€å“è³ªã‚‚ç¢ºä¿ã§ããã†ã§ã™ã€‚"
                        }
                    ]
                },
                {
                    clientSpeech: "å“è³ªé¢ã§ã®æ‡¸å¿µãŒã‚ã‚Šã¾ã™ã€‚æ–°æ©Ÿèƒ½ãŒæ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ",
                    choices: [
                        {
                            text: "è©³ç´°ãªå½±éŸ¿èª¿æŸ»ã‚’å®Ÿæ–½ã—ã€ãƒªã‚¹ã‚¯ã‚’äº‹å‰ã«ç‰¹å®šã—ã¾ã™ã€‚å“è³ªä¿è¨¼ãŒæœ€å„ªå…ˆã§ã™ã€‚",
                            effects: { trust: +15, budget: +5, schedule: -8, quality: +20 },
                            nextResponse: "å“è³ªä¿è¨¼ã‚’é‡è¦–ã—ã¦ã„ãŸã ã‘ã‚‹ã®ã¯å¿ƒå¼·ã„ã§ã™ã€‚ã©ã®ã‚ˆã†ãªèª¿æŸ»ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ"
                        },
                        {
                            text: "æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã¯ç‹¬ç«‹ã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆã§é–‹ç™ºã—ã€å½±éŸ¿ã‚’æœ€å°é™ã«æŠ‘ãˆã¾ã™ã€‚",
                            effects: { trust: +12, budget: +8, schedule: +5, quality: +15 },
                            nextResponse: "ç‹¬ç«‹ã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãªã‚‰å®‰å¿ƒã§ã™ã­ã€‚å¾Œã€…ã®ä¿å®ˆæ€§ã‚‚è‰¯ã•ãã†ã§ã™ã€‚"
                        },
                        {
                            text: "æ®µéšçš„ãªãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã®æ¤œè¨¼ã‚’è¡Œã„ã€æœ¬ç•ªã¸ã®å½±éŸ¿ã‚’ã‚¼ãƒ­ã«ã—ã¾ã™ã€‚",
                            effects: { trust: +10, budget: +3, schedule: +8, quality: +18 },
                            nextResponse: "æ®µéšçš„ãƒ†ã‚¹ãƒˆã¯é‡è¦ã§ã™ã­ã€‚ã©ã®ç¨‹åº¦ã®æœŸé–“ãŒå¿…è¦ã§ã—ã‚‡ã†ã‹ï¼Ÿ"
                        },
                        {
                            text: "ãƒªã‚¹ã‚¯ã¯ã‚ã‚Šã¾ã™ãŒã€ç´æœŸã‚’å®ˆã‚‹ãŸã‚ã«ä¸¦è¡Œé–‹ç™ºã§é€²ã‚ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚",
                            effects: { trust: -8, budget: +10, schedule: +15, quality: -15 },
                            nextResponse: "ä¸¦è¡Œé–‹ç™ºã§ã™ã‹...ãƒªã‚¹ã‚¯ãŒå¿ƒé…ã§ã™ãŒã€ç´æœŸã¯é‡è¦ãªã®ã§æ‚©ã¾ã—ã„ã¨ã“ã‚ã§ã™ã€‚"
                        }
                    ]
                },
                {
                    clientSpeech: "ã“ã“ã¾ã§ã®è­°è«–ã‚’è¸ã¾ãˆã¦ã€å…·ä½“çš„ãªææ¡ˆæ›¸ã‚’ä½œæˆã—ã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿé …ç›®ã¨æ¦‚ç®—ã‚’å«ã‚ã¦ã€‚",
                    choices: [
                        {
                            text: "è©³ç´°ãªææ¡ˆæ›¸ã‚’1é€±é–“ä»¥å†…ã«ä½œæˆã—ã¾ã™ã€‚ROIã®è©¦ç®—ã‚‚å«ã‚ã¦åŒ…æ‹¬çš„ã«æ¤œè¨ã—ã¾ã™ã€‚",
                            effects: { trust: +12, budget: +12, schedule: +8, quality: +12 },
                            nextResponse: "åŒ…æ‹¬çš„ãªææ¡ˆæ›¸ã‚’ãŠå¾…ã¡ã—ã¦ã„ã¾ã™ã€‚ROIãŒæ˜ç¢ºã«ãªã‚Œã°ã€çµŒå–¶é™£ã¸ã®èª¬æ˜ã‚‚ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚"
                        },
                        {
                            text: "æ˜æ—¥ã¾ã§ã«æ¦‚è¦ç‰ˆã‚’ãŠæ¸¡ã—ã—ã€ãã®å¾Œè©³ç´°ç‰ˆã‚’ä½œæˆã™ã‚‹æ®µéšçš„ãªé€²ã‚æ–¹ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ï¼Ÿ",
                            effects: { trust: +15, budget: +8, schedule: +12, quality: +8 },
                            nextResponse: "æ®µéšçš„ãªé€²ã‚æ–¹ã¯åŠ©ã‹ã‚Šã¾ã™ã€‚ã¾ãšã¯æ¦‚è¦ã‚’ç¢ºèªã•ã›ã¦ãã ã•ã„ã€‚"
                        },
                        {
                            text: "è¤‡æ•°ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨æ„ã—ã¦ã€äºˆç®—ã«å¿œã˜ã¦é¸æŠã§ãã‚‹ææ¡ˆæ›¸ã‚’ä½œæˆã—ã¾ã™ã€‚",
                            effects: { trust: +10, budget: +15, schedule: +5, quality: +10 },
                            nextResponse: "é¸æŠè‚¢ãŒã‚ã‚‹ã¨ã€çµŒå–¶é™£ã¨ã®èª¿æ•´ã‚‚ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚"
                        },
                        {
                            text: "ä»Šæ—¥ã®è­°è«–å†…å®¹ã‚’æ•´ç†ã—ã¦ã€ç°¡æ½”ãªææ¡ˆæ›¸ã‚’ä½œæˆã—ã¾ã™ã€‚",
                            effects: { trust: +8, budget: +5, schedule: +10, quality: +5 },
                            nextResponse: "ç°¡æ½”ã«ã¾ã¨ã‚ã¦ã„ãŸã ã‘ã‚‹ã¨åŠ©ã‹ã‚Šã¾ã™ã€‚ãƒã‚¤ãƒ³ãƒˆã‚’æ•´ç†ã—ã¦ãŠé¡˜ã„ã—ã¾ã™ã€‚"
                        }
                    ]
                },
                {
                    clientSpeech: "æœ€å¾Œã«ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ãƒªã‚¹ã‚¯ç®¡ç†ã«ã¤ã„ã¦ã‚‚ç›¸è«‡ã—ãŸã„ã®ã§ã™ãŒ...",
                    choices: [
                        {
                            text: "ãƒªã‚¹ã‚¯ç®¡ç†è¡¨ã‚’ä½œæˆã—ã€å®šæœŸçš„ãªãƒ¬ãƒ“ãƒ¥ãƒ¼ä¼šè­°ã§ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã—ã¾ã—ã‚‡ã†ã€‚",
                            effects: { trust: +15, budget: +5, schedule: +8, quality: +15 },
                            nextResponse: "å®šæœŸçš„ãªãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒã‚ã‚Œã°å®‰å¿ƒã§ã™ã€‚ã©ã®ç¨‹åº¦ã®é »åº¦ã§è¡Œã„ã¾ã™ã‹ï¼Ÿ"
                        },
                        {
                            text: "æƒ³å®šãƒªã‚¹ã‚¯ã¨å¯¾ç­–ã‚’æ–‡æ›¸åŒ–ã—ã€ç·Šæ€¥æ™‚ã®é€£çµ¡ä½“åˆ¶ã‚‚æ•´å‚™ã—ã¾ã™ã€‚",
                            effects: { trust: +12, budget: +8, schedule: +5, quality: +12 },
                            nextResponse: "ç·Šæ€¥æ™‚ã®ä½“åˆ¶æ•´å‚™ã¯é‡è¦ã§ã™ã­ã€‚24æ™‚é–“å¯¾å¿œã‚‚å¯èƒ½ã§ã—ã‚‡ã†ã‹ï¼Ÿ"
                        },
                        {
                            text: "ãƒªã‚¹ã‚¯ã‚’æœ€å°åŒ–ã™ã‚‹ãŸã‚ã«ã€ä¿å®ˆçš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§é€²ã‚ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚",
                            effects: { trust: +10, budget: +3, schedule: -5, quality: +18 },
                            nextResponse: "ä¿å®ˆçš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯å®‰å…¨ã§ã™ãŒã€ã‚¹ãƒ”ãƒ¼ãƒ‰æ„Ÿã‚‚é‡è¦ãªã®ã§ã€ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚ŠãŸã„ã§ã™ã­ã€‚"
                        },
                        {
                            text: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¿é™ºã®åŠ å…¥ã‚„ã€ãƒ™ãƒ³ãƒ€ãƒ¼ä¿è¨¼ã®æ‹¡å……ã‚‚æ¤œè¨ã—ã¾ã—ã‚‡ã†ã€‚",
                            effects: { trust: +8, budget: -5, schedule: +3, quality: +8 },
                            nextResponse: "ä¿é™ºã¨ã„ã†è¦³ç‚¹ã¯è€ƒãˆã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚ã©ã®ã‚ˆã†ãªä¿è¨¼å†…å®¹ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ"
                        }
                    ]
                },
                {
                    clientSpeech: "ä»Šæ—¥ã¯ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚éå¸¸ã«å»ºè¨­çš„ãªè­°è«–ãŒã§ãã¾ã—ãŸã€‚æœ€çµ‚çš„ãªåˆæ„ã«å‘ã‘ã¦ã€æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’ç¢ºèªã•ã›ã¦ãã ã•ã„ã€‚",
                    choices: [
                        {
                            text: "ææ¡ˆæ›¸ã®ä½œæˆã€çµŒå–¶é™£ã¸ã®èª¬æ˜ã€å¥‘ç´„æ›¸ã®èª¿æ•´ã‚’é †æ¬¡é€²ã‚ã¦ã„ãã¾ã—ã‚‡ã†ã€‚",
                            effects: { trust: +12, budget: +10, schedule: +8, quality: +10 },
                            nextResponse: "é †åºç«‹ã¦ã¦é€²ã‚ã¦ã„ãŸã ã‘ã‚‹ã¨å®‰å¿ƒã§ã™ã€‚ä»Šå¾Œã¨ã‚‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚"
                        },
                        {
                            text: "ã¾ãšã¯ç¤¾å†…ã§ã®æ¤œè¨æ™‚é–“ã‚’è¨­ã‘ã¦ã„ãŸã ãã€æ¥é€±æ”¹ã‚ã¦è©³ç´°ã‚’è©°ã‚ã¾ã—ã‚‡ã†ã€‚",
                            effects: { trust: +10, budget: +5, schedule: +5, quality: +8 },
                            nextResponse: "ãã†ã§ã™ã­ã€‚ç¤¾å†…èª¿æ•´ã‚‚å¿…è¦ã§ã™ã—ã€æ¥é€±ã®ä¼šè­°ã‚’æ¥½ã—ã¿ã«ã—ã¦ã„ã¾ã™ã€‚"
                        },
                        {
                            text: "ä»Šæ—¥ã®åˆæ„äº‹é …ã‚’è­°äº‹éŒ²ã«ã¾ã¨ã‚ã€é–¢ä¿‚è€…å…¨å“¡ã§å…±æœ‰ã—ã¾ã—ã‚‡ã†ã€‚",
                            effects: { trust: +15, budget: +8, schedule: +10, quality: +12 },
                            nextResponse: "è­°äº‹éŒ²ã®å…±æœ‰ã¯é‡è¦ã§ã™ã­ã€‚èªè­˜ã®é½Ÿé½¬ã‚’é˜²ããŸã‚ã«ã‚‚ã€ãœã²ãŠé¡˜ã„ã—ã¾ã™ã€‚"
                        },
                        {
                            text: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæˆåŠŸã«å‘ã‘ã¦ã€ç¶™ç¶šçš„ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é‡è¦–ã—ã¦ã„ãã¾ã™ã€‚",
                            effects: { trust: +18, budget: +5, schedule: +5, quality: +8 },
                            nextResponse: "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é‡è¦–ã—ã¦ã„ãŸã ã‘ã‚‹ã®ã¯å¿ƒå¼·ã„ã§ã™ã€‚ä»Šå¾Œã¨ã‚‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚"
                        }
                    ]
                }
            ]
        };

        // ã‚²ãƒ¼ãƒ é–‹å§‹é–¢æ•°
        function startGame(scenarioType) {
            // ã‚·ãƒŠãƒªã‚ªé¸æŠç”»é¢ã‚’éè¡¨ç¤º
            document.getElementById('scenario-selection').style.display = 'none';
            // ã‚²ãƒ¼ãƒ ç”»é¢ã‚’è¡¨ç¤º
            document.getElementById('game-content').style.display = 'block';
            
            // ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã‚’åˆæœŸåŒ–
            resetGameState();
            
            // æœ€åˆã®ã‚¿ãƒ¼ãƒ³ã‚’è¡¨ç¤º
            displayTurn();
        }

        // ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã®ãƒªã‚»ãƒƒãƒˆ
        function resetGameState() {
            gameState.currentTurn = 1;
            gameState.metrics = {
                trust: 70,
                budget: 60,
                schedule: 65,
                quality: 75
            };
            gameState.playerChoices = [];
            updateMetricsDisplay();
        }

        // ç¾åœ¨ã®ã‚¿ãƒ¼ãƒ³ã‚’è¡¨ç¤º
        function displayTurn() {
            const currentTurnData = bankingScenario.turns[gameState.currentTurn - 1];
            
            // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ç™ºè¨€ã‚’æ›´æ–°
            document.getElementById('client-speech').textContent = currentTurnData.clientSpeech;
            
            // ã‚¿ãƒ¼ãƒ³æƒ…å ±ã‚’æ›´æ–°
            document.getElementById('turn-counter').textContent = `ã‚¿ãƒ¼ãƒ³ ${gameState.currentTurn} / ${gameState.maxTurns}`;
            
            // é¸æŠè‚¢ã‚’ç”Ÿæˆ
            displayChoices(currentTurnData.choices);
            
            // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è¡¨æƒ…ã‚’æ›´æ–°ï¼ˆæ„Ÿæƒ…ã«å¿œã˜ã¦ï¼‰
            updateClientMood();
        }

        // é¸æŠè‚¢ã‚’è¡¨ç¤º
        function displayChoices(choices) {
            const choicesGrid = document.getElementById('choices-grid');
            choicesGrid.innerHTML = '';
            
            choices.forEach((choice, index) => {
                const choiceButton = document.createElement('div');
                choiceButton.className = 'choice-button';
                choiceButton.textContent = choice.text;
                choiceButton.onclick = () => selectChoice(index);
                choicesGrid.appendChild(choiceButton);
            });
        }

        // é¸æŠè‚¢ã‚’é¸æŠ
        function selectChoice(choiceIndex) {
            const currentTurnData = bankingScenario.turns[gameState.currentTurn - 1];
            const selectedChoice = currentTurnData.choices[choiceIndex];
            
            // é¸æŠã‚’è¨˜éŒ²
            gameState.playerChoices.push({
                turn: gameState.currentTurn,
                choice: selectedChoice.text,
                effects: selectedChoice.effects
            });
            
            // ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’æ›´æ–°
            updateMetrics(selectedChoice.effects);
            
            // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®åå¿œã‚’è¡¨ç¤º
            setTimeout(() => {
                document.getElementById('client-speech').textContent = selectedChoice.nextResponse;
                updateClientMood();
                
                // æ¬¡ã®ã‚¿ãƒ¼ãƒ³ã¸
                setTimeout(() => {
                    gameState.currentTurn++;
                    if (gameState.currentTurn <= gameState.maxTurns) {
                        displayTurn();
                    } else {
                        showResults();
                    }
                }, 2000);
            }, 1000);
        }

        // ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’æ›´æ–°
        function updateMetrics(effects) {
            Object.keys(effects).forEach(metric => {
                const change = effects[metric];
                gameState.metrics[metric] = Math.max(0, Math.min(100, gameState.metrics[metric] + change));
                
                // å¤‰åŒ–ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤º
                showMetricChange(metric, change);
            });
            
            // è¡¨ç¤ºã‚’æ›´æ–°
            updateMetricsDisplay();
        }

        // ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¡¨ç¤ºã‚’æ›´æ–°
        function updateMetricsDisplay() {
            const metrics = ['trust', 'budget', 'schedule', 'quality'];
            
            metrics.forEach(metric => {
                const value = gameState.metrics[metric];
                const fillElement = document.getElementById(`${metric}-fill`);
                const valueElement = document.getElementById(`${metric}-value`);
                
                fillElement.style.width = `${value}%`;
                valueElement.textContent = value;
                
                // è‰²ã®å¤‰æ›´ï¼ˆã‚¹ã‚³ã‚¢ã«å¿œã˜ã¦ï¼‰
                if (value >= 80) {
                    fillElement.style.background = 'linear-gradient(45deg, #4caf50, #8bc34a)';
                } else if (value >= 60) {
                    fillElement.style.background = 'linear-gradient(45deg, #ff9800, #ffc107)';
                } else {
                    fillElement.style.background = 'linear-gradient(45deg, #f44336, #e57373)';
                }
            });
        }

        // ãƒ¡ãƒˆãƒªã‚¯ã‚¹å¤‰åŒ–ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function showMetricChange(metric, change) {
            const metricItem = document.querySelector(`#${metric}-fill`).closest('.metric-item');
            const changeElement = document.createElement('div');
            changeElement.className = `metric-change ${change > 0 ? 'positive' : 'negative'}`;
            changeElement.textContent = `${change > 0 ? '+' : ''}${change}`;
            
            metricItem.style.position = 'relative';
            metricItem.appendChild(changeElement);
            
            // 2ç§’å¾Œã«è¦ç´ ã‚’å‰Šé™¤
            setTimeout(() => {
                if (changeElement.parentNode) {
                    changeElement.parentNode.removeChild(changeElement);
                }
            }, 2000);
        }

        // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è¡¨æƒ…ã‚’æ›´æ–°
        function updateClientMood() {
            const avatar = document.getElementById('client-avatar');
            const averageScore = (gameState.metrics.trust + gameState.metrics.budget + 
                                gameState.metrics.schedule + gameState.metrics.quality) / 4;
            
            if (averageScore >= 80) {
                avatar.textContent = 'ğŸ˜Š';
                avatar.style.background = '#4caf50';
            } else if (averageScore >= 60) {
                avatar.textContent = 'ğŸ¤”';
                avatar.style.background = '#ff9800';
            } else if (averageScore >= 40) {
                avatar.textContent = 'ğŸ˜';
                avatar.style.background = '#9e9e9e';
            } else {
                avatar.textContent = 'ğŸ˜Ÿ';
                avatar.style.background = '#f44336';
            }
        }

        // çµæœç”»é¢ã‚’è¡¨ç¤º
        function showResults() {
            // ã‚²ãƒ¼ãƒ ç”»é¢ã‚’éè¡¨ç¤º
            document.getElementById('game-content').style.display = 'none';
            // çµæœç”»é¢ã‚’è¡¨ç¤º
            document.getElementById('result-screen').style.display = 'block';
            
            // æœ€çµ‚ã‚¹ã‚³ã‚¢ã‚’è¡¨ç¤º
            document.getElementById('final-trust').textContent = gameState.metrics.trust;
            document.getElementById('final-budget').textContent = gameState.metrics.budget;
            document.getElementById('final-schedule').textContent = gameState.metrics.schedule;
            document.getElementById('final-quality').textContent = gameState.metrics.quality;
            
            // ç·åˆè©•ä¾¡ã‚’è¨ˆç®—
            const totalScore = gameState.metrics.trust + gameState.metrics.budget + 
                             gameState.metrics.schedule + gameState.metrics.quality;
            const averageScore = totalScore / 4;
            
            // çµæœã‚¿ã‚¤ãƒˆãƒ«ã‚’è¨­å®š
            const resultTitle = document.getElementById('result-title');
            if (averageScore >= 80) {
                resultTitle.textContent = 'ğŸ‰ äº¤æ¸‰å¤§æˆåŠŸï¼';
                resultTitle.className = 'result-title result-success';
            } else if (averageScore >= 65) {
                resultTitle.textContent = 'âœ… äº¤æ¸‰æˆåŠŸ';
                resultTitle.className = 'result-title result-success';
            } else if (averageScore >= 50) {
                resultTitle.textContent = 'âš ï¸ äº¤æ¸‰ç¶™ç¶šä¸­';
                resultTitle.className = 'result-title';
            } else {
                resultTitle.textContent = 'âŒ äº¤æ¸‰å¤±æ•—';
                resultTitle.className = 'result-title result-failure';
            }
            
            // è©³ç´°ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ç”Ÿæˆ
            generateDetailedFeedback(averageScore);
        }

        // è©³ç´°ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ç”Ÿæˆ
        function generateDetailedFeedback(averageScore) {
            const feedbackDiv = document.getElementById('detailed-feedback');
            let feedback = '';
            
            // ç·åˆè©•ä¾¡
            if (averageScore >= 80) {
                feedback += '<p><strong>ç´ æ™´ã‚‰ã—ã„äº¤æ¸‰ã§ã—ãŸï¼</strong>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã®ä¿¡é ¼é–¢ä¿‚ã‚’æ§‹ç¯‰ã—ãªãŒã‚‰ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æˆåŠŸã«å‘ã‘ã¦çš„ç¢ºãªææ¡ˆã¨åˆæ„å½¢æˆãŒã§ãã¾ã—ãŸã€‚</p>';
            } else if (averageScore >= 65) {
                feedback += '<p><strong>äº¤æ¸‰æˆåŠŸã§ã™ï¼</strong>ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸææ¡ˆã§ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è¦æœ›ã«å¿œãˆã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚</p>';
            } else if (averageScore >= 50) {
                feedback += '<p><strong>ã¾ãšã¾ãšã®çµæœã§ã™ã€‚</strong>ã„ãã¤ã‹ã®èª²é¡Œã¯æ®‹ã‚Šã¾ã—ãŸãŒã€ç¶™ç¶šçš„ãªè­°è«–ã§è§£æ±ºã§ããã†ã§ã™ã€‚</p>';
            } else {
                feedback += '<p><strong>äº¤æ¸‰ã¯å›°é›£ãªçŠ¶æ³ã§ã™ã€‚</strong>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã®èªè­˜ã«å·®ãŒã‚ã‚Šã€å†åº¦ã®èª¿æ•´ãŒå¿…è¦ã§ã™ã€‚</p>';
            }
            
            // å„æŒ‡æ¨™ã®åˆ†æ
            feedback += '<h4>ğŸ“‹ å„æŒ‡æ¨™ã®åˆ†æ</h4>';
            
            // ä¿¡é ¼åº¦ã®åˆ†æ
            if (gameState.metrics.trust >= 80) {
                feedback += '<p>ğŸ¤ <strong>ä¿¡é ¼åº¦ï¼š</strong>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã®å¼·å›ºãªä¿¡é ¼é–¢ä¿‚ã‚’æ§‹ç¯‰ã§ãã¾ã—ãŸã€‚é€æ˜æ€§ã®é«˜ã„ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒè©•ä¾¡ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>';
            } else if (gameState.metrics.trust >= 60) {
                feedback += '<p>ğŸ¤ <strong>ä¿¡é ¼åº¦ï¼š</strong>ä¸€å®šã®ä¿¡é ¼ã¯å¾—ã‚‰ã‚Œã¦ã„ã¾ã™ãŒã€ã‚ˆã‚Šè©³ç´°ãªèª¬æ˜ã‚„ææ¡ˆãŒæ±‚ã‚ã‚‰ã‚Œã‚‹å ´é¢ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚</p>';
            } else {
                feedback += '<p>ğŸ¤ <strong>ä¿¡é ¼åº¦ï¼š</strong>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ä¿¡é ¼ã‚’ååˆ†ã«å¾—ã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚ã‚ˆã‚Šä¸å¯§ãªèª¬æ˜ã¨èª å®Ÿãªå¯¾å¿œãŒå¿…è¦ã§ã™ã€‚</p>';
            }
            
            // äºˆç®—ã®åˆ†æ
            if (gameState.metrics.budget >= 80) {
                feedback += '<p>ğŸ’° <strong>äºˆç®—ï¼š</strong>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åç›Šæ€§ã‚’ç¢ºä¿ã—ãªãŒã‚‰ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ã‚‚ç´å¾—ã„ãŸã ã‘ã‚‹ææ¡ˆãŒã§ãã¾ã—ãŸã€‚</p>';
            } else if (gameState.metrics.budget >= 60) {
                feedback += '<p>ğŸ’° <strong>äºˆç®—ï¼š</strong>äºˆç®—ãƒãƒ©ãƒ³ã‚¹ã¯å–ã‚Œã¦ã„ã¾ã™ãŒã€ã‚ˆã‚ŠåŠ¹ç‡çš„ãªææ¡ˆã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚</p>';
            } else {
                feedback += '<p>ğŸ’° <strong>äºˆç®—ï¼š</strong>ã‚³ã‚¹ãƒˆé¢ã§ã®èª¿æ•´ãŒä¸ååˆ†ã§ã™ã€‚ä¾¡å€¤ææ¡ˆã®è¦‹ç›´ã—ãŒå¿…è¦ã§ã™ã€‚</p>';
            }
            
            // ç´æœŸã®åˆ†æ
            if (gameState.metrics.schedule >= 80) {
                feedback += '<p>â° <strong>ç´æœŸï¼š</strong>ç¾å®Ÿçš„ãªã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†ãŒã§ãã¦ãŠã‚Šã€æœŸé™å†…å®Œæˆã®å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚</p>';
            } else if (gameState.metrics.schedule >= 60) {
                feedback += '<p>â° <strong>ç´æœŸï¼š</strong>ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯æ¦‚ã­ç®¡ç†ã§ãã¦ã„ã¾ã™ãŒã€ãƒªã‚¹ã‚¯ç®¡ç†ã®å¼·åŒ–ãŒæœ›ã¾ã‚Œã¾ã™ã€‚</p>';
            } else {
                feedback += '<p>â° <strong>ç´æœŸï¼š</strong>ç´æœŸéµå®ˆã«èª²é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ã‚¹ã‚³ãƒ¼ãƒ—èª¿æ•´ã‚„è³‡æºé…åˆ†ã®è¦‹ç›´ã—ãŒå¿…è¦ã§ã™ã€‚</p>';
            }
            
            // å“è³ªã®åˆ†æ
            if (gameState.metrics.quality >= 80) {
                feedback += '<p>ğŸ¯ <strong>å“è³ªï¼š</strong>é«˜å“è³ªãªæˆæœç‰©ã®æä¾›ã«å‘ã‘ã¦ã€é©åˆ‡ãªå“è³ªç®¡ç†ä½“åˆ¶ãŒæ§‹ç¯‰ã§ãã¦ã„ã¾ã™ã€‚</p>';
            } else if (gameState.metrics.quality >= 60) {
                feedback += '<p>ğŸ¯ <strong>å“è³ªï¼š</strong>å“è³ªé¢ã§ã®åŸºæœ¬çš„ãªé…æ…®ã¯ã§ãã¦ã„ã¾ã™ãŒã€ã‚ˆã‚Šè©³ç´°ãªå“è³ªä¿è¨¼ç­–ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚</p>';
            } else {
                feedback += '<p>ğŸ¯ <strong>å“è³ªï¼š</strong>å“è³ªç®¡ç†ã«ä¸å®‰ãŒã‚ã‚Šã¾ã™ã€‚ãƒ†ã‚¹ãƒˆè¨ˆç”»ã‚„å“è³ªåŸºæº–ã®æ˜ç¢ºåŒ–ãŒå¿…è¦ã§ã™ã€‚</p>';
            }
            
            // PMã¨ã—ã¦ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹
            feedback += '<h4>ğŸ’¡ PMã¨ã—ã¦ã®æ”¹å–„ãƒã‚¤ãƒ³ãƒˆ</h4>';
            
            // æœ€ã‚‚ä½ã„ã‚¹ã‚³ã‚¢ã®æŒ‡æ¨™ã«å¯¾ã™ã‚‹ã‚¢ãƒ‰ãƒã‚¤ã‚¹
            const lowestMetric = Object.keys(gameState.metrics).reduce((a, b) => 
                gameState.metrics[a] < gameState.metrics[b] ? a : b
            );
            
            switch(lowestMetric) {
                case 'trust':
                    feedback += '<p>ãƒ» <strong>ä¿¡é ¼é–¢ä¿‚ã®æ§‹ç¯‰ï¼š</strong>ã‚ˆã‚Šé »ç¹ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨é€æ˜æ€§ã®é«˜ã„æƒ…å ±å…±æœ‰ã‚’å¿ƒãŒã‘ã¾ã—ã‚‡ã†ã€‚</p>';
                    break;
                case 'budget':
                    feedback += '<p>ãƒ» <strong>äºˆç®—ç®¡ç†ï¼š</strong>ROIã®æ˜ç¢ºåŒ–ã¨æ®µéšçš„ãªä¾¡å€¤æä¾›ã®ææ¡ˆã‚’æ¤œè¨ã—ã¾ã—ã‚‡ã†ã€‚</p>';
                    break;
                case 'schedule':
                    feedback += '<p>ãƒ» <strong>ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†ï¼š</strong>ãƒªã‚¹ã‚¯ãƒãƒƒãƒ•ã‚¡ã®è¨­å®šã¨æ—©æœŸè­¦å‘Šã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ãŒé‡è¦ã§ã™ã€‚</p>';
                    break;
                case 'quality':
                    feedback += '<p>ãƒ» <strong>å“è³ªç®¡ç†ï¼š</strong>å“è³ªåŸºæº–ã®æ˜ç¢ºåŒ–ã¨ç¶™ç¶šçš„ãªå“è³ªç›£è¦–ä½“åˆ¶ã®æ§‹ç¯‰ã‚’æ¨é€²ã—ã¾ã—ã‚‡ã†ã€‚</p>';
                    break;
            }
            
            // é¸æŠã®æŒ¯ã‚Šè¿”ã‚Š
            feedback += '<h4>ğŸ” é¸æŠã®æŒ¯ã‚Šè¿”ã‚Š</h4>';
            const strongChoices = gameState.playerChoices.filter(choice => {
                const totalEffect = Object.values(choice.effects).reduce((sum, val) => sum + val, 0);
                return totalEffect > 15;
            });
            
            if (strongChoices.length > 0) {
                feedback += '<p><strong>åŠ¹æœçš„ã ã£ãŸé¸æŠï¼š</strong></p><ul>';
                strongChoices.forEach(choice => {
                    feedback += `<li>ã‚¿ãƒ¼ãƒ³${choice.turn}: ${choice.choice.substring(0, 50)}...</li>`;
                });
                feedback += '</ul>';
            }
            
            feedback += '<p>ç¶™ç¶šçš„ãªå­¦ç¿’ã¨çµŒé¨“ã‚’ç©ã‚€ã“ã¨ã§ã€ã•ã‚‰ã«å„ªã‚ŒãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã«ãªã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚</p>';
            
            feedbackDiv.innerHTML = feedback;
        }

        // ã‚²ãƒ¼ãƒ ã‚’å†é–‹
        function restartGame() {
            // çµæœç”»é¢ã‚’éè¡¨ç¤º
            document.getElementById('result-screen').style.display = 'none';
            // ã‚·ãƒŠãƒªã‚ªé¸æŠç”»é¢ã‚’è¡¨ç¤º
            document.getElementById('scenario-selection').style.display = 'block';
            
            // ã‚¢ãƒã‚¿ãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆ
            const avatar = document.getElementById('client-avatar');
            avatar.textContent = 'ğŸ‘¨â€ğŸ’¼';
            avatar.style.background = '#2196f3';
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // åˆæœŸãƒ¡ãƒˆãƒªã‚¯ã‚¹è¡¨ç¤ºã‚’æ›´æ–°
            updateMetricsDisplay();
        });
    </script>
</body>
</html>